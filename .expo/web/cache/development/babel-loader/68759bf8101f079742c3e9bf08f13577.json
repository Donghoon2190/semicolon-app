{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\FinalProject\\\\semicolon-app\\\\screens\\\\Popup.js\";\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  mutation deletePost(\\n    $id : String!\\n  ) { \\n    deletePost(id: $id ) \\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  mutation editPost(\\n    $id : String!,\\n  $caption:String!\\n  ) { editPost(\\n    id: $id,\\n     caption: $caption) \\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    background-color:white;\\n    justifyContent: center\\n    align-items: center\\n    height: 40px\\n    width:100px\\n    margin-right:5px\\n    margin-left:5px\\n    border-radius:5px\\n    \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    background-color:whitesmoke;\\n    justifyContent: center\\n    align-items: center\\n    height: 40px\\n    border-radius:5px\\n    \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Modal from 'react-native-modal';\nimport styled from 'styled-components';\nimport AuthInput from \"../components/AuthInput\";\nimport useInput from \"../hooks/useInput\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useMutation } from 'react-apollo-hooks';\nimport { gql } from \"apollo-boost\";\nimport { FEED_QUERY } from \"./tabs/Home\";\nvar Button = styled.TouchableOpacity(_templateObject());\nvar InputButton = styled.TouchableOpacity(_templateObject2());\nvar EDIT_POST = gql(_templateObject3());\nvar DELETE_POST = gql(_templateObject4());\nexport default (function (_ref) {\n  var id = _ref.id,\n      copyCaption = _ref.copyCaption,\n      setCopyCaption = _ref.setCopyCaption;\n\n  var toggleModal = function toggleModal() {\n    setModalVisible(!isModalVisible);\n  };\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isModalVisible = _useState2[0],\n      setModalVisible = _useState2[1];\n\n  var toggleInput = function toggleInput() {\n    setInputUp(!inputUp);\n  };\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      inputUp = _useState4[0],\n      setInputUp = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var captionInput = useInput(copyCaption);\n\n  var _useMutation = useMutation(DELETE_POST, {\n    variables: {\n      id: id\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      deletePostMutation = _useMutation2[0];\n\n  var _useMutation3 = useMutation(EDIT_POST, {\n    variables: {\n      id: id,\n      caption: captionInput.value\n    },\n    refetchQueries: [{\n      query: FEED_QUERY\n    }]\n  }),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      editPostMutation = _useMutation4[0];\n\n  var editSubmit = function editSubmit() {\n    return _regeneratorRuntime.async(function editSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setCopyCaption(captionInput.value);\n            setLoading(true);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(editPostMutation());\n\n          case 4:\n            setLoading(false);\n            toggleInput();\n            toggleModal();\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var deletePost = function deletePost() {\n    return _regeneratorRuntime.async(function deletePost$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setLoading(true);\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(deletePostMutation());\n\n          case 3:\n            setLoading(false);\n            toggleModal();\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    onPress: toggleModal,\n    style: {\n      fontWeight: \"bold\",\n      fontSize: 20,\n      marginLeft: \"auto\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, \"...\"), React.createElement(Modal, {\n    isVisible: isModalVisible,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: {\n      marginBottom: 10,\n      width: 100\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, React.createElement(Button, {\n    onPress: toggleInput,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, loading ? React.createElement(ActivityIndicator, {\n    color: \"black\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 40\n    }\n  }) : React.createElement(Text, {\n    style: {\n      color: \"black\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 80\n    }\n  }, \"\\uC218\\uC815\"))), React.createElement(View, {\n    style: {\n      marginBottom: 10,\n      width: 100\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, React.createElement(Button, {\n    onPress: deletePost,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, loading ? React.createElement(ActivityIndicator, {\n    color: \"black\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 40\n    }\n  }) : React.createElement(Text, {\n    style: {\n      color: \"black\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 80\n    }\n  }, \"\\uC0AD\\uC81C\"))), React.createElement(View, {\n    style: {\n      marginBottom: 10,\n      width: 100\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, React.createElement(Button, {\n    onPress: toggleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }, loading ? React.createElement(ActivityIndicator, {\n    color: \"black\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 40\n    }\n  }) : React.createElement(Text, {\n    style: {\n      color: \"black\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 80\n    }\n  }, \"\\uCDE8\\uC18C\"))))), React.createElement(Modal, {\n    isVisible: inputUp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: {\n      marginBottom: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, React.createElement(AuthInput, {\n    placeholder: \"Caption\",\n    value: captionInput.value,\n    onChange: captionInput.onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  })), React.createElement(View, {\n    style: {\n      marginBottom: 10,\n      flexDirection: \"row\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, React.createElement(InputButton, {\n    onPress: editSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, loading ? React.createElement(ActivityIndicator, {\n    color: \"black\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 40\n    }\n  }) : React.createElement(Text, {\n    style: {\n      color: \"black\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 80\n    }\n  }, \"\\uC218\\uC815\")), React.createElement(InputButton, {\n    onPress: toggleInput,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, loading ? React.createElement(ActivityIndicator, {\n    color: \"black\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 40\n    }\n  }) : React.createElement(Text, {\n    style: {\n      color: \"black\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 80\n    }\n  }, \"\\uCDE8\\uC18C\"))))));\n});","map":{"version":3,"sources":["D:/FinalProject/semicolon-app/screens/Popup.js"],"names":["React","useState","Modal","styled","AuthInput","useInput","useMutation","gql","FEED_QUERY","Button","TouchableOpacity","InputButton","EDIT_POST","DELETE_POST","id","copyCaption","setCopyCaption","toggleModal","setModalVisible","isModalVisible","toggleInput","setInputUp","inputUp","loading","setLoading","captionInput","variables","deletePostMutation","caption","value","refetchQueries","query","editPostMutation","editSubmit","deletePost","flex","fontWeight","fontSize","marginLeft","justifyContent","alignItems","marginBottom","width","color","onChange","flexDirection"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Text, View } from 'react-native';\r\nimport Modal from 'react-native-modal';\r\nimport styled from 'styled-components';\r\nimport AuthInput from '../components/AuthInput';\r\nimport useInput from '../hooks/useInput';\r\nimport { ActivityIndicator } from \"react-native\";\r\nimport { useMutation } from 'react-apollo-hooks';\r\nimport { gql } from \"apollo-boost\";\r\nimport { FEED_QUERY } from './tabs/Home';\r\nconst Button = styled.TouchableOpacity`\r\n    background-color:whitesmoke;\r\n    justifyContent: center\r\n    align-items: center\r\n    height: 40px\r\n    border-radius:5px\r\n    `\r\nconst InputButton = styled.TouchableOpacity`\r\n    background-color:white;\r\n    justifyContent: center\r\n    align-items: center\r\n    height: 40px\r\n    width:100px\r\n    margin-right:5px\r\n    margin-left:5px\r\n    border-radius:5px\r\n    `\r\nconst EDIT_POST = gql`\r\n  mutation editPost(\r\n    $id : String!,\r\n  $caption:String!\r\n  ) { editPost(\r\n    id: $id,\r\n     caption: $caption) \r\n  }\r\n`;\r\n\r\nconst DELETE_POST = gql`\r\n  mutation deletePost(\r\n    $id : String!\r\n  ) { \r\n    deletePost(id: $id ) \r\n  }\r\n`;\r\n\r\nexport default ({ id, copyCaption, setCopyCaption }) => {\r\n    const toggleModal = () => { setModalVisible(!isModalVisible) };\r\n    const [isModalVisible, setModalVisible] = useState(false);\r\n    const toggleInput = () => { setInputUp(!inputUp) }\r\n    const [inputUp, setInputUp] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const captionInput = useInput(copyCaption);\r\n    const [deletePostMutation] = useMutation(DELETE_POST,\r\n        { variables: { id } });\r\n    const [editPostMutation] = useMutation(EDIT_POST,\r\n        {\r\n            variables: { id, caption: captionInput.value },\r\n            refetchQueries: [{ query: FEED_QUERY }]\r\n        });\r\n\r\n    const editSubmit = async () => {\r\n        setCopyCaption(captionInput.value)\r\n        setLoading(true)\r\n        await editPostMutation();\r\n        setLoading(false)\r\n        toggleInput()\r\n        toggleModal()\r\n    }\r\n    const deletePost = async () => {\r\n        setLoading(true)\r\n        await deletePostMutation();\r\n        setLoading(false)\r\n        toggleModal()\r\n    }\r\n    return (\r\n        <View style={{ flex: 1 }}>\r\n            <Text onPress={toggleModal} style={{ fontWeight: \"bold\", fontSize: 20, marginLeft: \"auto\" }}>...</Text>\r\n            <Modal isVisible={isModalVisible}>\r\n                <View style={{ justifyContent: 'center', alignItems: 'center' }}>\r\n                    <View style={{ marginBottom: 10, width: 100 }}>\r\n                        <Button onPress={toggleInput}>\r\n                            {loading ? <ActivityIndicator color={\"black\"} /> : <Text style={{ color: \"black\", fontWeight: \"bold\" }}>수정</Text>}\r\n                        </Button>\r\n                    </View>\r\n                    <View style={{ marginBottom: 10, width: 100 }}>\r\n                        <Button onPress={deletePost}>\r\n                            {loading ? <ActivityIndicator color={\"black\"} /> : <Text style={{ color: \"black\", fontWeight: \"bold\" }}>삭제</Text>}\r\n                        </Button>\r\n                    </View>\r\n                    <View style={{ marginBottom: 10, width: 100 }}>\r\n                        <Button onPress={toggleModal}>\r\n                            {loading ? <ActivityIndicator color={\"black\"} /> : <Text style={{ color: \"black\", fontWeight: \"bold\" }}>취소</Text>}\r\n                        </Button>\r\n                    </View>\r\n                </View >\r\n            </Modal >\r\n\r\n            <Modal isVisible={inputUp}>\r\n                <View style={{ alignItems: 'center' }}>\r\n                    <View style={{ marginBottom: 10 }}>\r\n                        <AuthInput placeholder={\"Caption\"} value={captionInput.value} onChange={captionInput.onChange} />\r\n                    </View>\r\n                    <View style={{ marginBottom: 10, flexDirection: \"row\" }}>\r\n                        <InputButton onPress={editSubmit}>\r\n                            {loading ? <ActivityIndicator color={\"black\"} /> : <Text style={{ color: \"black\", fontWeight: \"bold\" }}>수정</Text>}\r\n                        </InputButton>\r\n                        <InputButton onPress={toggleInput}>\r\n                            {loading ? <ActivityIndicator color={\"black\"} /> : <Text style={{ color: \"black\", fontWeight: \"bold\" }}>취소</Text>}\r\n                        </InputButton>\r\n                    </View>\r\n\r\n                </View >\r\n            </Modal >\r\n        </View >\r\n    );\r\n\r\n}"]},"metadata":{},"sourceType":"module"}