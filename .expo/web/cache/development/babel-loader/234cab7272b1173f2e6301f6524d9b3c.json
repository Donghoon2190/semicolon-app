{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\FinalProject\\\\semicolon-app\\\\screens\\\\photo\\\\TakePhoto.js\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  width: 80;\\n  height: 80;\\n  border-radius: 40px;\\n  border: 10px solid \", \";\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  flex: 1;\\n  justify-content: center;\\n  align-items: center;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport styled from \"styled-components/native\";\nimport { Camera } from \"expo-camera\";\nimport * as MediaLibrary from \"expo-media-library\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport * as Permissions from \"expo-permissions\";\nimport constants from \"../../constants\";\nimport Loader from \"../../components/Loader\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport styles from \"../../styles\";\nimport { withNavigation } from \"react-navigation\";\nvar View = styled.View(_templateObject());\nvar Icon = styled.View(_templateObject2());\nvar Button = styled.View(_templateObject3(), styles.lightGreyColor);\nexport default (function (_ref) {\n  var navigation = _ref.navigation;\n  var cameraRef = useRef();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      canTakePhoto = _useState2[0],\n      setCanTakePhoto = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      hasPermission = _useState6[0],\n      setHasPermission = _useState6[1];\n\n  var _useState7 = useState(Camera.Constants.Type.back),\n      _useState8 = _slicedToArray(_useState7, 2),\n      cameraType = _useState8[0],\n      setCameraType = _useState8[1];\n\n  var takePhoto = function takePhoto() {\n    var _await$cameraRef$curr, uri, asset;\n\n    return _regeneratorRuntime.async(function takePhoto$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (canTakePhoto) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            _context.prev = 2;\n            setCanTakePhoto(false);\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(cameraRef.current.takePictureAsync({\n              quality: 1\n            }));\n\n          case 6:\n            _await$cameraRef$curr = _context.sent;\n            uri = _await$cameraRef$curr.uri;\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(MediaLibrary.createAssetAsync(uri));\n\n          case 10:\n            asset = _context.sent;\n            setCanTakePhoto(true);\n            navigation.navigate(\"Upload\", {\n              photo: asset\n            });\n            _context.next = 19;\n            break;\n\n          case 15:\n            _context.prev = 15;\n            _context.t0 = _context[\"catch\"](2);\n            console.log(_context.t0);\n            setCanTakePhoto(true);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[2, 15]], Promise);\n  };\n\n  var askPermission = function askPermission() {\n    var _await$Permissions$as, status;\n\n    return _regeneratorRuntime.async(function askPermission$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n          case 3:\n            _await$Permissions$as = _context2.sent;\n            status = _await$Permissions$as.status;\n\n            if (status === \"granted\") {\n              setHasPermission(true);\n            }\n\n            _context2.next = 12;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n            setHasPermission(false);\n\n          case 12:\n            _context2.prev = 12;\n            setLoading(false);\n            return _context2.finish(12);\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 8, 12, 15]], Promise);\n  };\n\n  var toggleType = function toggleType() {\n    if (cameraType === Camera.Constants.Type.front) {\n      setCameraType(Camera.Constants.Type.back);\n    } else {\n      setCameraType(Camera.Constants.Type.front);\n    }\n  };\n\n  useEffect(function () {\n    askPermission();\n  }, []);\n  return React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, loading ? React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }) : hasPermission ? React.createElement(React.Fragment, null, React.createElement(Camera, {\n    ref: cameraRef,\n    type: cameraType,\n    style: {\n      justifyContent: \"flex-end\",\n      padding: 15,\n      width: constants.width,\n      height: constants.height / 2\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: toggleType,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }, React.createElement(Icon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }, React.createElement(Ionicons, {\n    name: \"camera-reverse-outline\",\n    size: 32,\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 33\n    }\n  })))), React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: takePhoto,\n    disabled: !canTakePhoto,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, React.createElement(Button, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  })))) : null);\n});","map":{"version":3,"sources":["D:/FinalProject/semicolon-app/screens/photo/TakePhoto.js"],"names":["React","useState","useEffect","useRef","styled","Camera","MediaLibrary","Ionicons","Permissions","constants","Loader","styles","withNavigation","View","Icon","Button","lightGreyColor","navigation","cameraRef","canTakePhoto","setCanTakePhoto","loading","setLoading","hasPermission","setHasPermission","Constants","Type","back","cameraType","setCameraType","takePhoto","current","takePictureAsync","quality","uri","createAssetAsync","asset","navigate","photo","console","log","askPermission","askAsync","CAMERA","status","toggleType","front","justifyContent","padding","width","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport styled from \"styled-components/native\";\r\nimport { Camera } from \"expo-camera\";\r\nimport * as MediaLibrary from \"expo-media-library\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport * as Permissions from \"expo-permissions\";\r\nimport constants from \"../../constants\";\r\nimport Loader from \"../../components/Loader\";\r\nimport { TouchableOpacity, Platform } from \"react-native\";\r\nimport styles from \"../../styles\";\r\nimport { withNavigation } from \"react-navigation\";\r\nconst View = styled.View`\r\n  flex: 1;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Icon = styled.View``;\r\n\r\nconst Button = styled.View`\r\n  width: 80;\r\n  height: 80;\r\n  border-radius: 40px;\r\n  border: 10px solid ${styles.lightGreyColor};\r\n`;\r\n\r\nexport default ({ navigation }) => {\r\n\r\n    const cameraRef = useRef();\r\n    const [canTakePhoto, setCanTakePhoto] = useState(true);\r\n    const [loading, setLoading] = useState(true);\r\n    const [hasPermission, setHasPermission] = useState(false);\r\n    const [cameraType, setCameraType] = useState(Camera.Constants.Type.back);\r\n    const takePhoto = async () => {\r\n        if (!canTakePhoto) {\r\n            return;\r\n        }\r\n        try {\r\n            setCanTakePhoto(false);\r\n            const { uri } = await cameraRef.current.takePictureAsync({\r\n                quality: 1\r\n            });\r\n            const asset = await MediaLibrary.createAssetAsync(uri);\r\n            setCanTakePhoto(true)\r\n            navigation.navigate(\"Upload\", { photo: asset });\r\n        } catch (e) {\r\n            console.log(e);\r\n            setCanTakePhoto(true);\r\n        }\r\n    };\r\n    const askPermission = async () => {\r\n        try {\r\n            const { status } = await Permissions.askAsync(Permissions.CAMERA);\r\n\r\n            if (status === \"granted\") {\r\n                setHasPermission(true);\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n            setHasPermission(false);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    const toggleType = () => {\r\n        if (cameraType === Camera.Constants.Type.front) {\r\n            setCameraType(Camera.Constants.Type.back);\r\n        } else {\r\n            setCameraType(Camera.Constants.Type.front);\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        askPermission();\r\n    }, []);\r\n    return (\r\n        <View>\r\n            {loading ? (\r\n                <Loader />\r\n            ) : hasPermission ? (\r\n                <>\r\n                    <Camera\r\n                        ref={cameraRef}\r\n                        type={cameraType}\r\n                        style={{\r\n                            justifyContent: \"flex-end\",\r\n                            padding: 15,\r\n                            width: constants.width,\r\n                            height: constants.height / 2\r\n                        }}\r\n                    >\r\n                        <TouchableOpacity onPress={toggleType}>\r\n                            <Icon>\r\n                                <Ionicons\r\n                                    name={\"camera-reverse-outline\"}\r\n                                    size={32}\r\n                                    color={\"white\"}\r\n                                />\r\n                            </Icon>\r\n                        </TouchableOpacity>\r\n                    </Camera>\r\n                    <View>\r\n                        <TouchableOpacity onPress={takePhoto} disabled={!canTakePhoto}>\r\n                            <Button />\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                </>\r\n            ) : null}\r\n        </View>\r\n    );\r\n};"]},"metadata":{},"sourceType":"module"}